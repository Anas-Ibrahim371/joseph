<script>
    function loadContent(page, title) {
        const contentDiv = document.getElementById('content');
        contentDiv.innerHTML = ''; // إفراغ المحتوى قبل تحميل جديد
        fetch(page)
            .then(response => response.text())
            .then(data => {
                contentDiv.innerHTML = data;
                contentDiv.style.display = 'block';

                // إذا كانت هناك صور في المحتوى، نلفها بعنصر <a> لفتحها في تبويب جديد
                const images = contentDiv.querySelectorAll('img');
                images.forEach(img => {
                    const imgSrc = img.src;
                    const link = document.createElement('a');
                    link.href = imgSrc;
                    link.target = '_blank'; // فتح الصورة في تبويب جديد
                    img.parentNode.insertBefore(link, img);
                    link.appendChild(img);
                });

                // تعديل الـ URL
                window.history.pushState({page: page}, title, `https://anas-ibrahim371.github.io/joseph/#${title}`);
            })
            .catch(error => console.error('Error loading the page:', error));
        hideMindMapOptions(); // إخفاء خيارات الخرائط الذهنية عند تحميل محتوى جديد
    }

    // دالة لتشغيل المحتوى عند فتح رابط مباشر
    function checkDirectLink() {
        const url = window.location.hash;
        if (url) {
            const page = url.substring(1) + '.html'; // استخرج الاسم من الـ URL
            loadContent(page, url);
        }
    }

    window.onload = checkDirectLink; // تحقق من الرابط عند تحميل الصفحة
</script>
